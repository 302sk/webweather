<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <script src="js/libs/jquery/jquery.js">
        </script>
        
        <script>
            var cityname = "london";
            var weather_url = "http://api.openweathermap.org/data/2.5/find?q=";
            var get_geo_addr = "http://smart-ip.net/geoip-json?callback=?";  //get geo address from ip
            $(document).ready(function(){
               $.getJSON(get_geo_addr,
                        function(data, status){
                           // alert(status);
                            cityname = data.city;
                            weather_url += cityname;
                            $.getJSON(weather_url,
                            function(data){
                                    document.getElementById("message").innerHTML = data.list[0].name + ":" + data.list[0].weather[0].description;
                            });
                         });   
            });
        </script>
    </head>
    <body>
        <div id="message">Loading weather data...</div>
        <!--<button>Loading weather data...</button>-->
    </body>
</html>
